<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎲 機率探險家：獨立事件教學單元</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-light">
    <audio id="sound-flip" src="flip.mp3" preload="auto"></audio>
    <audio id="sound-roll" src="roll.mp3" preload="auto"></audio>
    <audio id="sound-incorrect" src="incorrect.mp3" preload="auto"></audio>
    <audio id="sound-correct" src="correct.mp3" preload="auto"></audio>

    <header class="bg-primary text-white text-center py-4 shadow">
        <div class="container">
            <h1>🪙 機率探險家：破解運氣的真相 📈</h1>
            <p>國小高年級至國中七年級數學單元：基礎機率與獨立事件</p>
        </div>
    </header>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow-sm">
        <div class="container">
            <ul class="navbar-nav w-100 d-flex justify-content-around list-unstyled mb-0 py-2 text-center">
                <li><a class="nav-link text-white px-3" href="#section-introduction">單元導論</a></li>
                <li><a class="nav-link text-white px-3" href="#section-short">I: 短期實驗</a></li>
                <li><a class="nav-link text-white px-3" href="#section-long">II: 大數法則</a></li>
                <li><a class="nav-link text-white px-3" href="#section-proof">III: 獨立事件</a></li>
                <li><a class="nav-link text-white px-3" href="#section-summary">總結回顧</a></li>
                <li><a class="nav-link text-info fw-bold px-3" href="video.html">📺教學影片</a></li>
                <li><a class="nav-link text-warning fw-bold px-3" href="quiz.html">✍️測驗</a></li>
            </ul>
        </div>
    </nav>

    <main class="container my-5">
        <section class="challenge-box introduction-box card p-4 mb-4 shadow-sm border-0" id="section-introduction">
            <h2 class="text-primary border-bottom pb-2">✨ 歡迎來到機率探險家：單元導論與學習目標</h2>
            <p class="introduction-text lead mt-3">在這個單元中，我們將透過互動式的擲硬幣和擲骰子實驗，探索機率世界的兩大核心支柱：<strong>大數法則 (Law of Large
                    Numbers)</strong> 和 <strong>獨立事件 (Independent Events)</strong>。</p>

            <div class="info-box goal-list alert alert-info my-4 border-0 shadow-sm">
                <h3 class="h5">🚀 本單元的學習目標：</h3>
                <ul class="mb-0">
                    <li><strong>分辨差異：</strong> 清楚區分「古典機率」（數學機率）與「實驗機率」（實驗頻率）。</li>
                    <li><strong>理解法則：</strong> 透過大規模模擬，理解並解釋「大數法則」如何讓實驗結果穩定真實。</li>
                    <li><strong>破解謬誤：</strong> 運用數據證明每次投擲都是「獨立事件」，駁斥「賭徒的錯誤觀念」。</li>
                    <li><strong>實際應用：</strong> 將機率思維應用到日常生活中的隨機事件（如遊戲或彩券）。</li>
                </ul>
            </div>

            <p>準備好了嗎？點擊下方或導覽列的連結，開始您的機率探險！</p>
            <div class="text-center">
                <a href="#section-short" class="btn btn-primary btn-lg shadow mt-2">開始區塊 I：短期運氣挑戰 🎯</a>
            </div>
        </section>

        <section class="challenge-box card p-4 mb-4 shadow-sm border-0" id="section-short">
            <h2 class="text-primary border-bottom pb-2">🎯 區塊 I：運氣與直覺挑戰 (短期 N=20)</h2>
            <p>區塊 I-A 和 I-B 旨在透過少量的手動實驗，讓您感受實驗機率在次數少時的<strong>不穩定性</strong>。請點擊硬幣約 20 次，將結果記錄在學習單上，觀察是否符合你最初的猜想。</p>

            <div class="row">
                <div class="col-lg-6 mb-4 border-end">
                    <h3 class="h4">🪙 區塊 I-A：擲硬幣模擬 (P=50%)</h3>
                    <div id="coin-display" class="text-center py-4">
                        <img id="coin-img" src="coin_head.png" alt="硬幣" style="width:120px;">
                    </div>
                    <div class="text-center mb-3">
                        <button id="flip-button" class="btn btn-success px-4">點擊擲硬幣</button>
                        <button id="reset-coin-button" class="btn btn-outline-secondary ms-2"
                            style="display: none;">重置挑戰 (從頭開始)</button>
                    </div>
                    <div class="stats bg-light p-3 rounded d-flex justify-content-around mb-3 fw-bold">
                        <span>正面次數: <span id="heads-count" class="text-primary">0</span></span>
                        <span>反面次數: <span id="tails-count" class="text-danger">0</span></span>
                    </div>
                    <div id="frequency-bar-container" class="progress mb-4" style="height: 30px;">
                        <div id="heads-bar" class="progress-bar bg-primary" style="width: 50%;">50%</div>
                        <div id="tails-bar" class="progress-bar bg-danger" style="width: 50%;">50%</div>
                    </div>

                    <div class="info-box alert alert-warning">
                        <h3>📖 理論講解：數學機率 vs. 實驗結果</h3>
                        <p>硬幣出現正面的<strong>數學機率 (古典機率)</strong> 永遠是
                            <strong>50%</strong>。但是，您自己擲幣得到的結果（<strong>實驗結果</strong>），在次數很少時，會因為<strong>「運氣」</strong>而上上下下跑來跑去，結果很不穩定！
                        </p>
                        <p id="short-term-feedback" class="feedback-text fw-bold"></p>
                    </div>

                    <div class="quiz-box card p-3 bg-light border-0 shadow-sm" id="quiz-box-1">
                        <h3 class="h5">❓ 知識測驗 (短期隨機性)</h3>
                        <p>你剛才擲了 10 次，正面是 7 次。你認為下次擲幣正面機率會是？</p>
                        <div class="btn-group w-100">
                            <button class="quiz-option btn btn-outline-primary" data-answer="A">A) 50%</button>
                            <button class="quiz-option btn btn-outline-primary" data-answer="B">B) 30% (平衡回來)</button>
                            <button class="quiz-option btn btn-outline-primary" data-answer="C">C) 70% (跟隨上次結果)</button>
                        </div>
                        <p id="quiz-feedback-1" class="quiz-feedback mt-2 mb-0 fw-bold"></p>
                    </div>
                </div>

                <div class="col-lg-6 mb-4">
                    <h3 class="h4">🎲 區塊 I-B：擲骰子模擬 (P=1/6)</h3>
                    <div class="theory-box alert alert-info mb-3">
                        <h4 class="h5">🔢 古典機率理論：單次擲骰子</h4>
                        <p class="small mb-2">擲一個公正的六面骰子，總共有 <strong>6</strong> 種可能的結果 (1, 2, 3, 4, 5,
                            6)。每種點數都是獨立事件，發生的機率相等。</p>
                        <p class="small mb-0">因此，擲出任一點數（如 4 點）的<strong>古典機率 (P)</strong> 為：P(特定點數) = 1 / 總結果數 = 1 / 6 ≈
                            16.67%</p>
                        <p class="small mt-2">請透過多次擲骰子，觀察短期內實驗結果與這個理論值之間的**隨機偏差**。</p>
                    </div>
                    <div id="dice-display" class="text-center py-3">
                        <img id="dice-img" src="dice_1.png" alt="骰子" style="width:80px;">
                    </div>
                    <div class="text-center mb-3">
                        <button id="roll-dice-button" class="btn btn-success px-4">點擊擲骰子</button>
                    </div>
                    <p id="dice-short-term-feedback" class="text-center text-muted small">點擊「擲骰子」按鈕，開始觀察各點數的短期頻率！</p>
                    <div class="stats alert alert-secondary p-2 d-flex justify-content-around small mb-3">
                        <span>總次數: <span id="dice-total-count" class="fw-bold">0</span></span>
                        <span>上次擲出: <span id="last-dice-result" class="text-primary fw-bold">?</span> 點</span>
                        <span class="text-danger">理論機率: 約 16.67%</span>
                    </div>
                    <div id="dice-frequency-container">
                        <h3 class="h5">🔢 點數次數與實驗頻率</h3>
                        <ul id="dice-results-list" class="list-inline text-center small mb-2"></ul>
                        <div id="dice-chart-wrapper" style="height: 200px;">
                            <canvas id="diceFrequencyBarChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="challenge-box card p-4 mb-4 shadow-sm border-0" id="section-long">
            <h2 class="text-primary border-bottom pb-2">📊 區塊 II：大數法則與數據穩定性 (大規模 N=10000)</h2>
            <p>短期結果不可靠。現在我們執行 10000 次模擬，觀察頻率如何穩定！</p>

            <div class="mb-3 text-center">
                <strong class="me-2">請選擇模擬類型：</strong>
                <div class="btn-group">
                    <button id="select-coin" class="sim-type-button btn btn-outline-dark active">硬幣 (結果 1/2)</button>
                    <button id="select-dice" class="sim-type-button btn btn-outline-dark">骰子 (結果 1/6)</button>
                </div>
            </div>

            <div class="text-center">
                <button id="run-simulation-button" class="btn btn-warning btn-lg px-5 fw-bold shadow">執行 10000
                    次模擬！</button>
            </div>

            <div id="simulation-results" class="hidden mt-4 p-4 bg-dark text-white rounded">
                <div class="stats-large" id="sim-stats-coin">
                    <div class="row text-center h5">
                        <div class="col-md-4 text-warning">總正面次數: <span id="sim-heads">0</span></div>
                        <div class="col-md-4 text-warning">總反面次數: <span id="sim-tails">0</span></div>
                        <div class="col-md-4 text-warning">整體正面頻率 (P): <span id="sim-prob">0%</span></div>
                    </div>
                </div>

                <div class="stats-large hidden text-dark" id="sim-stats-dice">
                    <p class="text-center">總模擬次數: <span id="dice-sim-total">0</span> | <span class="text-info">理論機率
                            (每點): 約 16.67%</span></p>
                    <div id="dice-sim-counts" class="row row-cols-2 row-cols-md-3 g-3 text-center small mt-2">
                        <div class="col">1點: <span id="dice-sim-1">0</span> (<span id="dice-freq-1">0%</span>)</div>
                        <div class="col">2點: <span id="dice-sim-2">0</span> (<span id="dice-freq-2">0%</span>)</div>
                        <div class="col">3點: <span id="dice-sim-3">0</span> (<span id="dice-freq-3">0%</span>)</div>
                        <div class="col">4點: <span id="dice-sim-4">0</span> (<span id="dice-freq-4">0%</span>)</div>
                        <div class="col">5點: <span id="dice-sim-5">0</span> (<span id="dice-freq-5">0%</span>)</div>
                        <div class="col">6點: <span id="dice-sim-6">0</span> (<span id="dice-freq-6">0%</span>)</div>
                    </div>
                </div>

                <h3 class="h5 mt-4 text-center">頻率穩定性圖 (大數法則)</h3>
                <div class="bg-white rounded p-2 mt-2">
                    <canvas id="frequencyChart"></canvas>
                </div>
            </div>

            <div class="info-box hidden alert alert-success mt-4" id="info-box-2">
                <h3>📚 理論講解：大數法則 (次數越多，結果越準)</h3>
                <p>正如圖表所示，當我們擲幣/擲骰的次數（N）變得非常多時，實驗結果 (趨勢線) 就會慢慢穩定下來，並且越來越靠近數學機率 (理論線)。這就是大數法則！</p>
                <p class="mb-0 fw-bold">簡單來說，樣本越多，實驗結果就越接近真實的機率。</p>
            </div>

            <div class="quiz-box hidden card p-4 bg-light border-0 shadow-sm mt-3 text-center" id="quiz-box-2">
                <h3 class="h5">❓ 知識測驗 (大數法則)</h3>
                <p>如果我們再擲 10000 次硬幣，正面總頻率會偏離 50% 很多嗎？</p>
                <button class="quiz-option btn btn-outline-primary mx-2" data-answer="A">A) 會，因為 50% 只是巧合。</button>
                <button class="quiz-option btn btn-outline-primary mx-2" data-answer="B">B) 不會，大數法則保證結果會穩定在 50%
                    附近。</button>
                <p id="quiz-feedback-2" class="quiz-feedback mt-3 mb-0 fw-bold"></p>
            </div>
        </section>

        <section class="challenge-box card p-4 mb-4 shadow-sm border-0" id="section-proof">
            <h2 class="text-primary border-bottom pb-2">🔥 區塊 III：獨立事件終極對決 (駁斥賭徒謬誤)</h2>
            <p><strong>賭徒謬誤挑戰：</strong> 當連續發生某個結果後，下一次的機率會「平衡回來」嗎？</p>

            <div id="proof-guide-box" class="info-box alert alert-danger mb-4 text-center shadow-sm">
                <h3>🛑 數據缺失警告</h3>
                <p id="proof-guide-text">您尚未執行「<strong>區塊 II：大數法則與數據穩定性</strong>」中的 10000 次模擬！獨立事件的證明需要龐大的數據基礎。</p>
                <a href="#section-long" class="btn btn-danger btn-lg shadow">點擊前往區塊 II 執行模擬 📊</a>
            </div>

            <div class="text-center mb-4">
                <button id="proof-button-coin" class="btn btn-primary px-4 py-2" disabled>分析硬幣數據並證明！</button>
                <button id="proof-button-dice" class="btn btn-secondary px-4 py-2 ms-2" disabled>分析骰子數據並證明！</button>
            </div>

            <hr>

            <div id="coin-final-proof" class="hidden proof-area bg-light p-4 rounded shadow-sm border mb-4">
                <h3 class="h5 text-primary">🪙 硬幣獨立性證明：連續 5 正面之後</h3>
                <p>程式分析大數據後，尋找連續出現 5 次正面的所有情況，並統計第 6 次的結果：</p>
                <div class="row align-items-center">
                    <div class="col-md-8"><canvas id="proofCoinChartCanvas"></canvas></div>
                    <div class="col-md-4 text-center">
                        <div class="proof-stats bg-white p-3 rounded border">
                            <p class="mb-1 small">第 6 次出現正面機率:</p>
                            <span id="proof-heads-prob" class="h4 text-primary fw-bold">0%</span>
                            <hr>
                            <p class="mb-1 small">第 6 次出現反面機率:</p>
                            <span id="proof-tails-prob" class="h4 text-danger fw-bold">0%</span>
                        </div>
                    </div>
                </div>
                <p class="final-conclusion text-center text-success h5 fw-bold mt-4"><strong>&#9989; 結論：</strong>
                    數據證明，硬幣擲出結果不受過去影響，是**獨立事件**！</p>
            </div>

            <div id="dice-final-proof" class="hidden proof-area bg-light p-4 rounded shadow-sm border mb-4">
                <h3 class="h5 text-info">🎲 骰子獨立性證明：連續 5 次非 6 點之後</h3>
                <p>程式分析大數據後，尋找連續出現 5 次「非 6 點」的所有情況，並統計第 6 次是否出現 6 點：</p>
                <div class="row align-items-center">
                    <div class="col-md-8"><canvas id="proofDiceChartCanvas"></canvas></div>
                    <div class="col-md-4 text-center">
                        <div class="proof-stats bg-white p-3 rounded border">
                            <p class="mb-1 small">第 6 次擲出 6 點機率:</p>
                            <span id="proof-six-prob" class="h4 text-success fw-bold">0%</span>
                            <hr>
                            <p class="mb-1 small">第 6 次擲出非 6 點機率:</p>
                            <span id="proof-non-six-prob" class="h4 text-secondary fw-bold">0%</span>
                        </div>
                    </div>
                </div>
                <p class="final-conclusion text-center text-success h5 fw-bold mt-4"><strong>&#9989; 結論：</strong>
                    數據證明，骰子擲出結果不受過去影響，是**獨立事件**！</p>
            </div>

            <div class="info-box hidden alert alert-dark mt-4" id="info-box-3">
                <h3>🧠 理論精華：獨立事件 — 過去不影響未來</h3>
                <p>你的數據證明了每次投擲都是<strong>獨立事件</strong>。這表示：前面的結果，對於下次的結果<strong>完全沒有影響</strong>！</p>
                <p>誤以為連續出現某種結果後，下一個結果會「平衡回來」的錯誤想法，就是著名的「<strong>賭徒的錯誤觀念</strong> (賭徒謬誤)」。</p>
                <p class="mb-0 fw-bold text-warning">數學定義：若事件 A 和事件 B 獨立，則 P(A 交集 B) = P(A) 乘以 P(B)</p>
            </div>

            <div class="quiz-box hidden card p-4 bg-light border-0 shadow-sm mt-3 text-center" id="quiz-box-3">
                <h3 class="h5">❓ 知識測驗 (獨立事件)</h3>
                <p>你買彩券已經連續 10 次沒中獎了。你認為第 11 次中獎的機率會：</p>
                <button class="quiz-option btn btn-outline-primary mx-2" data-answer="A">A) 增加，因為運氣快平衡了。</button>
                <button class="quiz-option btn btn-outline-primary mx-2" data-answer="B">B) 保持不變，因為每次開獎都是獨立事件。</button>
                <p id="quiz-feedback-3" class="quiz-feedback mt-3 mb-0 fw-bold"></p>
            </div>
        </section>

        <section class="challenge-box card p-4 mb-4 shadow-sm border-0" id="section-summary">
            <h2 class="text-primary border-bottom pb-2">📚 總結回顧：機率核心概念</h2>
            <p>恭喜您完成「機率探險家」的挑戰！機率不是運氣，而是一種數學規律。以下是本單元的三個核心概念：</p>

            <div class="info-box mt-3">
                <h3 class="h5 text-success mb-3">💡 核心概念對比與應用</h3>
                <div class="table-responsive">
                    <table class="table table-bordered align-middle">
                        <thead class="table-dark text-center">
                            <tr>
                                <th style="width: 20%;">概念名稱</th>
                                <th style="width: 45%;">是什麼意思？</th>
                                <th style="width: 35%;">應用情境</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="fw-bold text-center">古典機率</td>
                                <td><strong>數學上的標準機率</strong>。用「可能數 / 總數」算出來的結果。</td>
                                <td>擲硬幣出現正面的機率 (1/2)、擲骰子出現 1 點的機率 (1/6)。</td>
                            </tr>
                            <tr>
                                <td class="fw-bold text-center">實驗機率</td>
                                <td><strong>你實際去做了之後得到的結果</strong>。計算「某結果的次數 / 總次數」。</td>
                                <td>您在區塊 I 中擲幣 20 次得到的正面百分比。</td>
                            </tr>
                            <tr>
                                <td class="fw-bold text-center">大數法則</td>
                                <td><strong>次數越多，實驗結果就越接近古典機率。</strong></td>
                                <td>區塊 II 中 10000 次模擬後，頻率穩定收斂到 50%。</td>
                            </tr>
                            <tr>
                                <td class="fw-bold text-center">獨立事件</td>
                                <td><strong>「健忘的事件」</strong>。每一次發生，都跟過去發生的所有結果無關。</td>
                                <td>擲硬幣、擲骰子、樂透開獎、輪盤賭。</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="quiz-box card p-5 bg-primary text-white text-center mt-5 border-0 shadow">
                <h3 class="display-6 mb-3 btn-outline-warning">🚀 最終挑戰：練習測驗</h3>
                <p class="lead mb-4">準備好檢視學習成果了嗎？點擊下方按鈕前往獨立測驗頁面！</p>
                <a href="quiz.html" class="btn btn-light btn-lg px-5 fw-bold text-primary shadow">開始機率核心概念測驗 📝</a>
            </div>
        </section>
    </main>

    <footer class="bg-dark text-white text-center py-4 mt-5">
        <p class="mb-0 opacity-75">© 數學教學專案報告 - 基礎機率與獨立事件</p>
    </footer>

    <script src="script.js"></script>
</body>

</html>